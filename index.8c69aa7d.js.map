{"mappings":"AAAA,MAAM,SAAS,SAAS,aAAa,CAAC;AACtC,MAAM,UAAU,OAAO,UAAU,CAAC;AAElC,OAAO,KAAK,GAAG,OAAO,UAAU;AAChC,OAAO,MAAM,GAAG,OAAO,WAAW;AAClC,OAAO,gBAAgB,CAAC,UAAU,IAAM;IACpC,OAAO,KAAK,GAAG,OAAO,UAAU;IAChC,OAAO,MAAM,GAAG,OAAO,WAAW;IAClC;AACJ;AAEA,SAAS,MAAM,KAAK,EAAE;IAClB,0DAA0D;IAC1D,OACI,CAAC,2BAA2B,CAAC,GAAG,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC;AAElF;AAEA,MAAM,aAAa;AACnB,MAAM,SAAS,EAAE;AACjB,MAAM,WAAW;IACb,OAAO;AACX;AAEA,IAAK,IAAI,IAAI,GAAG,IAAI,YAAY,IAAK;IACjC,MAAM,MAAM,IAAI;IAChB,IAAI,GAAG,GAAG,MAAM;IAChB,OAAO,IAAI,CAAC;AAChB;AAEA,KAAK,EAAE,CAAC,UAAU;IACd,OAAO,aAAa;IACpB,MAAM;IACN,MAAM;IACN,eAAe;QACX,SAAS;QACT,OAAO;QACP,OAAO;QACP,KAAK;IAET;IACA,UAAU;AACd;AAGA,MAAM,CAAC,EAAE,CAAC,MAAM,GAAG;AAEnB,SAAS,SAAS;IACd,WAAW,MAAM,CAAC,SAAS,KAAK,CAAC,EAAE;AACvC;AAEA,SAAS,WAAW,KAAK,EAAE,GAAG,EAAE;IAC5B,IAAI,SAAS,IAAI,MAAM;IACvB,IAAI,SAAS,OAAO,KAAK,GAAG,MAAM,KAAK;IACvC,IAAI,SAAS,OAAO,MAAM,GAAG,MAAM,MAAM;IACzC,IAAI,QAAQ,KAAK,GAAG,CAAC,QAAQ;IAC7B,IAAI,gBAAgB,AAAC,CAAA,OAAO,KAAK,GAAG,MAAM,KAAK,GAAG,KAAI,IAAK;IAC3D,IAAI,gBAAgB,AAAC,CAAA,OAAO,MAAM,GAAG,MAAM,MAAM,GAAG,KAAI,IAAK;IAC7D,IAAI,SAAS,CAAC,GAAG,GAAG,OAAO,KAAK,EAAE,OAAO,MAAM;IAC/C,IAAI,SAAS,CACT,OACA,GACA,GACA,MAAM,KAAK,EACX,MAAM,MAAM,EACZ,eACA,eACA,MAAM,KAAK,GAAG,OACd,MAAM,MAAM,GAAG;AAEvB","sources":["src/js/keyanim.js"],"sourcesContent":["const canvas = document.querySelector(\"#keyanimation\");\r\nconst context = canvas.getContext(\"2d\");\r\n\r\ncanvas.width = window.innerWidth;\r\ncanvas.height = window.innerHeight;\r\nwindow.addEventListener(\"resize\", () => {\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n    render();\r\n});\r\n\r\nfunction files(index) {\r\n    // list of files inside img dir from key00001 -> key 00151\r\n    return (\r\n        `./images/Key/Key animation_` + index.toString().padStart(5, \"0\") + `.png`\r\n    );\r\n}\r\n\r\nconst frameCount = 151;\r\nconst images = [];\r\nconst imageSeq = {\r\n    frame: 0,\r\n};\r\n\r\nfor (let i = 0; i < frameCount; i++) {\r\n    const img = new Image();\r\n    img.src = files(i);\r\n    images.push(img);\r\n}\r\n\r\ngsap.to(imageSeq, {\r\n    frame: frameCount - 1,\r\n    snap: \"frame\",\r\n    ease: \"none\",\r\n    scrollTrigger: {\r\n        trigger: \".page\",\r\n        scrub: 0.5,\r\n        start: \"top 30%\",\r\n        end: \"100%\",\r\n        // markers: true,\r\n    },\r\n    onUpdate: render,\r\n});\r\n\r\n\r\nimages[0].onload = render;\r\n\r\nfunction render() {\r\n    scaleImage(images[imageSeq.frame], context);\r\n}\r\n\r\nfunction scaleImage(image, ctx) {\r\n    var canvas = ctx.canvas;\r\n    var hRatio = canvas.width / image.width;\r\n    var vRatio = canvas.height / image.height;\r\n    var ratio = Math.min(hRatio, vRatio);\r\n    var centerShift_x = (canvas.width - image.width * ratio) / 2;\r\n    var centerShift_y = (canvas.height - image.height * ratio) / 2;\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    ctx.drawImage(\r\n        image,\r\n        0,\r\n        0,\r\n        image.width,\r\n        image.height,\r\n        centerShift_x,\r\n        centerShift_y,\r\n        image.width * ratio,\r\n        image.height * ratio\r\n    );\r\n}"],"names":[],"version":3,"file":"index.8c69aa7d.js.map","sourceRoot":"/__parcel_source_root/"}