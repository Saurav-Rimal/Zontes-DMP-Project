{"mappings":"AAAA,MAAMA,OAASC,SAASC,cAAc,iBAChCC,QAAUH,OAAOI,WAAW,MAUlC,SAASC,MAAMC,GAEX,MACI,8BAAgCA,EAAMC,WAAWC,SAAS,EAAG,KAAO,MAE5E,CAbAR,OAAOS,MAAQC,OAAOC,WACtBX,OAAOY,OAASF,OAAOG,YACvBH,OAAOI,iBAAiB,UAAU,KAC9Bd,OAAOS,MAAQC,OAAOC,WACtBX,OAAOY,OAASF,OAAOG,YACvBE,QAAA,IAUJ,MAAMC,WAAa,IACbC,OAAS,GACTC,SAAW,CACbC,MAAO,GAGX,IAAK,IAAIC,EAAI,EAAGA,EANG,IAMaA,IAAK,CACjC,MAAMC,EAAM,IAAIC,MAChBD,EAAIE,IAAMlB,MAAMe,GAChBH,OAAOO,KAAKH,EAChB,CAmBA,SAASN,SACLU,WAAWR,OAAOC,SAASC,OAAQhB,QACvC,CAEA,SAASsB,WAAWC,EAAOC,GACvB,IAAI3B,EAAS2B,EAAI3B,OACb4B,EAAS5B,EAAOS,MAAQiB,EAAMjB,MAC9BoB,EAAS7B,EAAOY,OAASc,EAAMd,OAC/BkB,EAAQC,KAAKC,IAAIJ,EAAQC,GACzBI,GAAiBjC,EAAOS,MAAQiB,EAAMjB,MAAQqB,GAAS,EACvDI,GAAiBlC,EAAOY,OAASc,EAAMd,OAASkB,GAAS,EAC7DH,EAAIQ,UAAU,EAAG,EAAGnC,EAAOS,MAAOT,EAAOY,QACzCe,EAAIS,UACAV,EACA,EACA,EACAA,EAAMjB,MACNiB,EAAMd,OACNqB,EACAC,EACAR,EAAMjB,MAAQqB,EACdJ,EAAMd,OAASkB,EAEvB,CAxCAO,KAAKC,GAAGpB,SAAU,CACdC,MAAOH,IACPuB,KAAM,QACNC,KAAM,OACNC,cAAe,CACXC,QAAS,QACTC,MAAO,GACPC,MAAO,UACPC,IAAK,QAGTC,SAAU/B,SAIdE,OAAO,GAAG8B,OAAShC","sources":["src/js/keyanim.js"],"sourcesContent":["const canvas = document.querySelector(\"#keyanimation\");\r\nconst context = canvas.getContext(\"2d\");\r\n\r\ncanvas.width = window.innerWidth;\r\ncanvas.height = window.innerHeight;\r\nwindow.addEventListener(\"resize\", () => {\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n    render();\r\n});\r\n\r\nfunction files(index) {\r\n    // list of files inside img dir from key00001 -> key 00151\r\n    return (\r\n        `./images/Key/Key animation_` + index.toString().padStart(5, \"0\") + `.png`\r\n    );\r\n}\r\n\r\nconst frameCount = 151;\r\nconst images = [];\r\nconst imageSeq = {\r\n    frame: 0,\r\n};\r\n\r\nfor (let i = 0; i < frameCount; i++) {\r\n    const img = new Image();\r\n    img.src = files(i);\r\n    images.push(img);\r\n}\r\n\r\ngsap.to(imageSeq, {\r\n    frame: frameCount - 1,\r\n    snap: \"frame\",\r\n    ease: \"none\",\r\n    scrollTrigger: {\r\n        trigger: \".page\",\r\n        scrub: 0.5,\r\n        start: \"top 30%\",\r\n        end: \"100%\",\r\n        // markers: true,\r\n    },\r\n    onUpdate: render,\r\n});\r\n\r\n\r\nimages[0].onload = render;\r\n\r\nfunction render() {\r\n    scaleImage(images[imageSeq.frame], context);\r\n}\r\n\r\nfunction scaleImage(image, ctx) {\r\n    var canvas = ctx.canvas;\r\n    var hRatio = canvas.width / image.width;\r\n    var vRatio = canvas.height / image.height;\r\n    var ratio = Math.min(hRatio, vRatio);\r\n    var centerShift_x = (canvas.width - image.width * ratio) / 2;\r\n    var centerShift_y = (canvas.height - image.height * ratio) / 2;\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    ctx.drawImage(\r\n        image,\r\n        0,\r\n        0,\r\n        image.width,\r\n        image.height,\r\n        centerShift_x,\r\n        centerShift_y,\r\n        image.width * ratio,\r\n        image.height * ratio\r\n    );\r\n}"],"names":["canvas","document","querySelector","context","getContext","files","index","toString","padStart","width","window","innerWidth","height","innerHeight","addEventListener","render","frameCount","images","imageSeq","frame","i","img","Image","src","push","scaleImage","image","ctx","hRatio","vRatio","ratio","Math","min","centerShift_x","centerShift_y","clearRect","drawImage","gsap","to","snap","ease","scrollTrigger","trigger","scrub","start","end","onUpdate","onload"],"version":3,"file":"index.877eb1b4.js.map"}